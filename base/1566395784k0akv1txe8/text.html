<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Тема, конечно, неоднократно поднятая, но я все равно напишу шпаргалку на тот случай, если вдруг когда-нибудь забуду. А то с WCSF тоже вроде разобралась, а прошло два месяца со сдачи проекта, и уже ничего и не помню...</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Сразу предупрежу, что статья предназначена для того, чтобы быстро въехать в MVVM или быстро его вспомнить. Так что описание будет предельно краткое и схематичное.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000;">Уважаемые коллеги! Эта статья написана в 2010 году. Я примерно с 2011 пишу только на Java под андроид и не помню про WPF ничего. Что-либо у меня спрашивать — бесполезно. Извините</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Итак, MVVM. Расшифровывается как Model-View-ViewModel. Рассмотрим на примере.</span></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">Пример</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Для начала отмечу, что для упрощения нашей жизни с данным паттерном добрые люди разрабатывают</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><a href="http://wpf.codeplex.com/releases/view/14962"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#de7008;">MVVM Toolkit</span></a><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">, включающий шаблон для Visual Studio:</span><img src="image1566396180foecpmtfiq.png" /></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Для данного проекта сразу создается следующая структура файлов:</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><img src="image15663961807cr83mgie3.png" /></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">Задача</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Возьмем какую-нибудь каноничную задачу. Например, отображение списка книг читального зала. У книги есть:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:13px;">Название</span></li>
<li style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:13px;">Автор</span></li>
<li style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:13px;">Доступное количество</span></li></ul>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Ну и хватит пока. Добавим немного интерактивности. Пусть к нам ходят читатели и то и дело берут книги почитать или возвращают их обратно. А нам надо в любой момент знать, сколько экземпляров той или иной книги у нас осталось и можем ли мы ее выдать.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">На примере такой незатейливой задачи мы и рассмотрим MVVM</span></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">Model</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Как несложно догадаться,</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000;">Model</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> — это сущности системы. У нас модель будет состоять из одного простого класса:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffcc66;"><span style=" font-family:'Tahoma'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#ffcc66;">Book.cs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">class</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">    public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">string</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Title { </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">set</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">    public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">string</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Author { </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">set</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">    public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">int</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Count { </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">set</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">    public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">string</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> title, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">string</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> author, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">int</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> count)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">        this</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">.Title = title;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">        this</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">.Author = author;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">        this</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">.Count = count;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">ViewModel</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000;">ViewModel</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> — это, пожалуй, ключевой момент всей этой истории. Это такие специальные классы, которые:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:13px;">Осуществляют связь между моделью и формой.</span></li>
<li style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:13px;">Отслеживают изменения в данных, произведенные пользователем.</span></li>
<li style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:13px;">Обрабатывают логику работы View (механизм команд)</span></li></ul>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">В учетом датабиндинга в WPF всё это дает замечательный результат: в C#-коде формы становится совсем не надо ничего писать. Впрочем, обо все по порядку. Напишем ViewModel для нашей модели:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffcc66;"><span style=" font-family:'Tahoma'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#ffcc66;">Book.cs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">class</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BookViewModel : ViewModelBase</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book Book;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BookViewModel(Book book)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">this</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">.Book = book;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">string</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Title</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> { </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">return</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book.Title; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">set</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            Book.Title = value;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            OnPropertyChanged(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Title&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">string</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Author</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> { </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">return</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book.Author; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">set</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            Book.Author = value;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            OnPropertyChanged(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Author&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">int</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Count</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> { </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">return</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book.Count; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">set</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            Book.Count = value;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            OnPropertyChanged(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Count&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">BookViewModel</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> унаследован от класса </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">ViewModelBase</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">, который заботливо сгенерил нам MVVM Toolkit. </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">ViewModelBase</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> же, в свою очередь, реализует интерфейс </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">INotifyPropertyChanged</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> и содержит функцию </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">OnPropertyChanged</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">. Все это нужно для того, чтобы всегда можно было вызвать событие &quot;изменилось такое-то поле&quot;. Как видно в коде, при любом изменении поля мы такое событие вызываем и передаем в качестве параметра его название. Потом на форме биндинг может это событие обработать и, как следствие, интерфейс и ViewModel всегда будут друг с другом синхронизированы. Впрочем, это я опять забегаю вперед.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Помимо</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">BookViewModel</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> у нас есть еще класс </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">MainViewModel</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">, уже сгенерированный и даже связанный с формой. Добавим в него поле:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffdd;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">ObservableCollection</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;BookViewModel&gt; BooksList { </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">set</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">; }</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">ObservableCollection</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> — это такая специальная коллекция, которая умеет отслеживать изменения в себе. Также слегка изменим конструктор:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffdd;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> MainViewModel(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">List</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;Book&gt; books)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffdd;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffdd;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    BooksList = </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">ObservableCollection</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;BookViewModel&gt;(books.Select(b =&gt; </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BookViewModel(b)));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffdd;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">View</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Это и есть наше окно, либо User Control. У любого FrameworkElement-а WPF есть такое поле</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">DataContext</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">. DataContext может быть любым object-ом, иметь какие угодно поля, а его главная задача — являться источником данных для Databinding-а. Форма у нас всего одна, DataContext для нее заполняется в методе </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">OnStartup</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">, что в </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">App.xaml.cs</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">. Немного модифицируем то, что сделал нам MVVM Toolkit, получится следующее:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffcc66;"><span style=" font-family:'Tahoma'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#ffcc66;">App.xaml.cs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">private</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">void</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> OnStartup(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">object</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> sender, StartupEventArgs e)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">List</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;Book&gt; books = </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">List</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;Book&gt;()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Колобок&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">null</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#008000;">3</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;CLR via C#&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Джеффри Рихтер&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#008000;">1</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Book(</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Война и мир&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Л.Н. Толстой&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">, </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#008000;">2</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    };</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    MainView view = </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> MainView(); </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#004f6f;">// создали View</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    MainViewModel viewModel = </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> ViewModels.MainViewModel(books); </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#004f6f;">// Создали ViewModel</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    view.DataContext = viewModel; </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#004f6f;">// положили ViewModel во View в качестве DataContext</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    view.Show();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Осталось написать XAML-код формы. Он прост и незатейлив:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffcc66;"><span style=" font-family:'Tahoma'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#ffcc66;">MainView.xaml</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;Window</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> x</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">:</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">Class</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;SampleMVVM.Views.MainView&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    xmlns</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    xmlns</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">:</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">x</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    xmlns</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">:</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">c</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;clr-namespace:SampleMVVM.Commands&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    Title</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Main Window&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Height</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;400&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Width</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;800&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">   </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ListView</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> ItemsSource</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding BooksList}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ListView.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ItemTemplate</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;Border</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BorderBrush</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Bisque&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BorderThickness</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;1&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;StackPanel</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Title}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> FontWeight</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Bold&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Author}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;StackPanel</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Orientation</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Horizontal&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Осталось:&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Count}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> FontWeight</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Bold&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10,0&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;шт&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/StackPanel&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/StackPanel&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/Border&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/ListView.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ItemTemplate</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/ListView&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/Window&gt;</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Обратите внимание на конструкцию</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">Binding</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> в разметке формы. Именно таким образом можно привязывать поля объекта, находящегося в DataContext-е, к атрибутам контролов. Мы не написали ни строчки кода, но тем не менее при запуске получим следующее:</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><img src="image1566396180wospb8gvoo.png" /></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">Редактирование</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Сделаем так, что для выделенной в списке книги будет открываться редактор. Изменим XAML-разметку формы:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffcc66;"><span style=" font-family:'Tahoma'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#ffcc66;">MainView.xaml</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;Window</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> x</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">:</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">Class</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;SampleMVVM.Views.MainView&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    xmlns</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    xmlns</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">:</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">x</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    xmlns</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">:</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">c</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;clr-namespace:SampleMVVM.Commands&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    Title</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Main Window&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Height</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;400&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Width</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;350&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#0000ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;Grid&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;Grid.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ColumnDefinitions</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ColumnDefinition</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ColumnDefinition</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/Grid.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ColumnDefinitions</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ListView</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> ItemsSource</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding BooksList}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000; background-color:#fbedbb;">IsSynchronizedWithCurrentItem</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff; background-color:#fbedbb;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000; background-color:#fbedbb;">&quot;True&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ListView.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ItemTemplate</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;Border</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BorderBrush</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Bisque&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BorderThickness</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;1&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;StackPanel</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Title}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> FontWeight</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Bold&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Author}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;StackPanel</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Orientation</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Horizontal&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Осталось:&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Count}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> FontWeight</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Bold&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10,0&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;шт&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/StackPanel&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/StackPanel&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/Border&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/ListView.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ItemTemplate</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/ListView&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">       </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000; background-color:#fbedbb;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ContentControl</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Grid</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">Column</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;1&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Content</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding BooksList}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;ContentControl.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ContentTemplate</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;Border</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BorderBrush</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Bisque&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BorderThickness</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;1&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;StackPanel</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Название:&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBox</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Title, UpdateSourceTrigger=PropertyChanged}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;0,0,0,10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                           </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBlock</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;Автор:&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;TextBox</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Text</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;{Binding Author, UpdateSourceTrigger=PropertyChanged}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">&quot;0,0,0,10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/StackPanel&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/Border&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/ContentControl.</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">ContentTemplate</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/ContentControl&gt;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/Grid&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">&lt;/Window&gt;</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Стоит обратить внимание на конструкцию</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">UpdateSourceTrigger=PropertyChanged</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> в строке биндинга. Это значит, что любое изменение, производимое в данном поле, будет немедленно отражаться на источнике. Это легко увидеть:</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><img src="image1566396180e5b6lpynw6.png" /></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Если этого не написать, источник будет обновляться только по окончании редактирования (т.е. когда контрол будет терять фокус). Это может привести к следующей ошибке интерфейса: когда жмешь &quot;Сохранить&quot;, сохраняется все, кроме только что измененного поля.</span></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">Команды</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Добавим в приложение функциональности. Пусть некие читатели берут книги и возвращают. Соответственно, сделаем две кнопки — «Выдать» и «Забрать—, меняющие количество имеющихся в наличии книг. Если книг не осталось (</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">Count = 0</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">), кнопка «Выдать» должна дизаблиться.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">В MVVM не пишутся обработчики событий. Функции, которые нужно выполнять контролам, пишутся во ViewModel и биндятся к контролам точно так же, как поля. Только используется механизм команд.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Команда должна представлять из себя экземпляр класса, реализующего интерфейс</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">ICommand</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">. К счастью, MVVM Toolkit снова нам помог и сгенерил целых два таких класса — </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">DelegateCommand</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> для реализации команды без параметров и </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">DelegateCommand&lt;T&gt;</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> — для реализации команды с параметром типа </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">T</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Мы параметры передавать не будем. Код во ViewModel будет таков:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffcc66;"><span style=" font-family:'Tahoma'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#ffcc66;">BookViewModel.cs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#ff0000;">#region</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Забрать</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">private</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">DelegateCommand</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> getItemCommand;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#773377;">ICommand</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> GetItemCommand</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">if</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> (getItemCommand == </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">null</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            getItemCommand = </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">DelegateCommand</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">(GetItem);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">return</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> getItemCommand;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">private</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">void</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> GetItem()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    Count++;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#ff0000;">#endregion</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#ff0000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#ff0000;">#region</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Выдать</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">private</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">DelegateCommand</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> giveItemCommand;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">public</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#773377;">ICommand</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> GiveItemCommand</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">get</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">if</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> (giveItemCommand == </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">null</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            giveItemCommand = </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">new</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800000;">DelegateCommand</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">(GiveItem, CanGiveItem);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">return</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> giveItemCommand;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">private</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">void</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> GiveItem()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    Count--;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">private</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">bool</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> CanGiveItem()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#0000ff;">return</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Count &gt; </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#008000;">0</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#ff0000;">#endregion</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Обратите внимание, что этот код добавляется в</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">BookViewModel</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">, а не в </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">MainViewMode</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">. Дело в том, что мы будем добавлять кнопки в ContentControl, DataContext-ом которого является именно </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">BookViewModel</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">С первой командой все ясно. Создали команду, и в назначили ей в качестве действия метод</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">GetItem</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">, который и будет вызываться при ее активации. Со второй немного интереснее, но тоже просто. Помимо того, что она выполняет некоторое действие, она еще и может проверять с помощью метода </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">CanGiveItem()</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">, может она выполняться или нет.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">В XAML-разметку нашей формы добавим следующее</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffcc66;"><span style=" font-family:'Tahoma'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#ffcc66;">MainView.xaml</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;ContentControl Grid.Column=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;1&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Content=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;{Binding BooksList}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    &lt;ContentControl.ContentTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        &lt;DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            &lt;Border BorderBrush=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Bisque&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> BorderThickness=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;1&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                &lt;StackPanel Margin=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    &lt;TextBlock Text=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Название:&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    &lt;TextBox Text=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;{Binding Title, UpdateSourceTrigger=PropertyChanged}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;0,0,0,10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">/&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    &lt;TextBlock Text=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Автор:&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    &lt;TextBox Text=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;{Binding Author, UpdateSourceTrigger=PropertyChanged}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;0,0,0,10&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">/&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000; background-color:#fbedbb;">                    </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;StackPanel Orientation=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Horizontal&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        &lt;Button Content=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Выдать&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Command=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;{Binding GiveItemCommand}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;10,0&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> /&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                        &lt;Button Content=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;Забрать&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Command=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;{Binding GetItemCommand}&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> Margin=</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#800080;">&quot;10,0&quot;</span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;"> /&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">                    &lt;/StackPanel&gt;                &lt;/StackPanel&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">            &lt;/Border&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">        &lt;/DataTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">    &lt;/ContentControl.ContentTemplate&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbedbb;"><span style=" font-family:'Courier New'; font-size:8.25pt; color:#000000;">&lt;/ContentControl&gt;</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">Вот и все. Мы получили требуемую функциональность. Количество экземпляров книги увеличивается и уменьшается, а когда их становится 0, кнопка «Выдать» дизаблится (благодаря упомянутому</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Courier New'; font-size:8.25pt; color:#4f4f2d;">CanGiveItem</span><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000;">).</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><img src="image15663961806v5ugcoewa.png" /></p>
<p style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#f6f6f6;">Итого</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f6f6;"><span style=" font-family:'Trebuchet MS,Trebuchet,Verdana,sans-serif'; font-size:8.25pt; color:#000000; background-color:#f6f6f6;">В приведенном приложении все данные и реализация логики вынесены в отдельное место. В C#-коде формы мы не добавили ни строчки. XAML понятен и прекрасен. Благодаря паттерну MVVM в коде легко разобраться и легко сопровождать.</span></p></body></html>