<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman,serif'; font-size:24pt; color:#000000;">Форматированный вывод в C#</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Значит, дело было так. Я писал программу на C#, в которой обрабатывалась матрица вещественных чисел, а затем выводилась в консоль. И все бы ничего, однако возникла одна проблема — вывод матрицы был просто ужасен, в том плане, что каждый элемент содержал разное количество символов, да и к тому же, количество символов, я Вам скажу, было немало. Решение данной проблемы я </span><a href="http://kya.canon.russia.expert/"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; text-decoration: underline; color:#800080;">стал искать в Интернете</span></a><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">. И вот, спустя некоторое время и посетив несколько сайтов, я нашел замечательную статью, под названием &quot;String Format for Double [C#]&quot; на сайте csharp-examples.net. Так как этот сайт полностью на английском языке, и мне очень понравилась эта статья, то я решил ее перевести.</span> </p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Начнем!</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">В следующих примерах показано, как переводить вещественные числа в строку в C#. Для этого Вы можете использовать статический метод </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">String.Format </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">или методы экземпляров </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">double.ToString </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">и </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">float.ToString.</span> </p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Цифры после точки</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">В этом примере демонстрируется перевод вещественного числа в строку с фиксированным числом десятичных знаков</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">. </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Например, для двух знаков используется шаблон </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;0.00&quot;. </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Если вещественное число содержит менее десятичных знаков, то оставшиеся позиции справа заполняются нулями, если же число знаков больше — производится округление.</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.00}&quot;, 123.4567);      // &quot;123.46&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.00}&quot;, 123.4);         // &quot;123.40&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.00}&quot;, 123.0);         // &quot;123.00&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Для получения строки с переменным количеством знаков используется символ </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;#&quot;. </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Чтобы на выходе получить строку, в которой количество десятичных знаков будет не более двух, используйте шаблон </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;0.##&quot;.</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.##}&quot;, 123.4567);      // &quot;123.46&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.##}&quot;, 123.4);         // &quot;123.4&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.##}&quot;, 123.0);         // &quot;123&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Цифры перед точкой</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Если на выходе нужно получить строку, в которой число знаков перед точкой будет не менее заданного числа, используйте шаблон, в котором указывается столько нулей перед точкой, сколько символов должно быть минимально.</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:00.0}&quot;, 123.4567);      // &quot;123.5&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:00.0}&quot;, 23.4567);       // &quot;23.5&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:00.0}&quot;, 3.4567);        // &quot;03.5&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:00.0}&quot;, -3.4567);       // &quot;-03.5&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Разделитель тысяч</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Чтобы в строках явно отделять тысячи, к обычному шаблону слева добавляется </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;0,&quot; </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">(ноль с запятой). К примеру, шаблон </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;0,0.0&quot; </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">позволяет получить строку, в которой явно отделяются тысячи, а число символов после точки будет не более одного.</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0,0.0}&quot;, 12345.67);     // &quot;12,345.7&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0,0}&quot;, 12345.67);       // &quot;12,346&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Ведущие Нули</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Вещественные числа, не превосходящие единицы по абсолютному значению, можно форматировать двумя способами:</span> </p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#333333;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt;">с ведущими нулями</span> </li>
<li style=" color:#333333;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt;">без ведущих нулей</span> </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Случай с ведущими нулями — самый обычный. Для него используются те же шаблоны, что описаны выше.</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Чтобы получать строки без ведущих нулей, используется символ </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;#&quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;"> перед точкой. Например, по шаблону</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;"> &quot;#.0&quot; </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">получим строки вида </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;.5&quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">, </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;123.5&quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">.</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.0}&quot;, 0.0);            // &quot;0.0&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.#}&quot;, 0.0);            // &quot;0&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:#.0}&quot;, 0.0);            // &quot;.0&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:#.#}&quot;, 0.0);            // &quot;&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Выравнивание с помощью пробелов</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Для выравнивания числа по правому краю используется запятая перед двоеточием. То есть, ставится запятая, а следом идет число, которое указывает, сколько пробелов должно быть. Пример: &quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">0,10:0.0&quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">.</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Для выравнивания по левому краю, шаблон будет таким же, за исключением того, что число пробелов должно быть указано со знаком минуса.</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">P.S.</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;"> Этот способ можно использовать только с помощью метода </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">String.Format</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0,10:0.0}&quot;, 123.4567);    // &quot;     123.5&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0,-10:0.0}&quot;, 123.4567);   // &quot;123.5     &quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0,10:0.0}&quot;, -123.4567);   // &quot;    -123.5&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0,-10:0.0}&quot;, -123.4567);  // &quot;-123.5    &quot; </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Пользовательское форматирование отрицательных чисел и нулей</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Если Вам необходимо получить строки в своем стиле форматирования, используйте точку с запятой для разделения шаблона на три части. Первая часть отвечает за форматирование положительных чисел, вторая — отрицательных, третья — нулей. Если Вы пропустите последнюю часть, то нули будут отформатированы так же, как и положительные числа.</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.00;minus 0.00;zero}&quot;, 123.4567);   // &quot;123.46&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.00;minus 0.00;zero}&quot;, -123.4567);  // &quot;minus 123.46&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0.00;minus 0.00;zero}&quot;, 0.0);        // &quot;zero&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Некоторые забавные примеры</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">Как Вы могли заметить в предыдущем примере, Вы можете вставить любой текст в шаблон, например, </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; font-style:italic; color:#333333;">my text </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">0.0&quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">. Вы даже можете вставить текст между нулями: </span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">&quot;0</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; font-style:italic; color:#333333;">aaa</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">.</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; font-style:italic; color:#333333;">bbb</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">0&quot;</span><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">.</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:my number is 0.0}&quot;, 12.3);   // &quot;my number is 12.3&quot; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#6a1009; background-color:#f5f5f5;">String.Format(&quot;{0:0aaa.bbb0}&quot;, 12.3);          // &quot;12aaa.bbb3&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; font-weight:600; color:#333333;">Небольшое мое дополнение к статье</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,sans-serif'; font-size:12pt; color:#333333;">В зависимости от локали (языкового стандарта программы), выводимые символы могут отличаться. Например, вместо точек выводятся запятые и т.д. К слову, у меня вместо десятичной точки выводится запятая, а вместо тысячного разделителя — пробел.</span> </p></body></html>