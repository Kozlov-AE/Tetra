<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:12pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px; background-color:#f7f7fa;"><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000; background-color:#f7f7fa;">В любом проекте WPF, как и в ряде других типов проектов для .NET, по умолчанию есть файл конфигурации, который называется</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;"> </span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; font-style:italic; color:#000000;">app.config</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;"> и который имеет следующее содержимое:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">&lt;configuration&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">    &lt;startup&gt; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">        &lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.6&quot; /&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">    &lt;/startup&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">&lt;/configuration&gt;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px; background-color:#f7f7fa;"><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000; background-color:#f7f7fa;">Добавим в него строку подключения к бд, изменив файл следующим образом:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px; font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000; background-color:#f7f7fa;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">&lt;configuration&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">    &lt;startup&gt; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">        &lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.6&quot; /&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">    &lt;/startup&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">  &lt;connectionStrings&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">   &lt;add name=&quot;DefaultConnection&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">        connectionString=&quot;Data Source=.\SQLEXPRESS;Initial Catalog=mobiledb;Integrated Security=True&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">       providerName=&quot;System.Data.SqlClient&quot;/&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">  &lt;/connectionStrings&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009;">&lt;/configuration&gt;</span></p></td>
<td style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;"></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px; background-color:#f7f7fa;"><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000; background-color:#f7f7fa;">Для определения всех подключений в программе в пределах узла</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;"> </span><span style=" font-family:'monospace'; font-size:13px; color:#000000;">&lt;configuration&gt;</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;"> добавляется новый узел </span><span style=" font-family:'monospace'; font-size:13px; color:#000000;">&lt;connectionStrings&gt;</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;">. В этом узле определяются строки подключения с помощью элемента </span><span style=" font-family:'monospace'; font-size:13px; color:#000000;">&lt;add&gt;</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;">. Каждая строка подключения имеет название, определяемое с помощью атрибута </span><span style=" font-family:'monospace'; font-size:13px; color:#000000;">name</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;">. В данном случае строка подключения называется &quot;DefaultConnection&quot;. Название может быть произвольное.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px; background-color:#f7f7fa;"><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000; background-color:#f7f7fa;">Атрибут connectionString собственно хранит строку подключения. Он состоит из трех частей:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px;"><span style=" font-family:'monospace'; font-size:13px;">Data Source=.\SQLEXPRESS</span><span style=" font-size:13px;">: указывает на название сервера. По умолчанию для MS SQL Server Express используется &quot;.\SQLEXPRESS&quot;</span></li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; line-height:20.8px;"><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;">Название можно найти в MSSQL Server Managment Studio. Скорее всего нужно просто вставить название оттуда, без &quot;</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;">.\</span><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;">&quot;</span></p>
<li style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px;"><span style=" font-family:'monospace'; font-size:13px;">Initial Catalog=mobiledb</span><span style=" font-size:13px;">: название базы данных. Так как база данных называется mobiledb, то соответственно здесь данное название и указываем</span></li>
<li style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px;"><span style=" font-family:'monospace'; font-size:13px;">Integrated Security=True</span><span style=" font-size:13px;">: задает режим аутентификации</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px; background-color:#f7f7fa;"><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000; background-color:#f7f7fa;">Так как мы будем подключаться к базе данных MS SQL Server, то соответственно мы будем использовать провайдер для SQL Server, функциональность которого заключена в пространстве имен System.Data.SqlClient.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:20.8px; background-color:#f7f7fa;"><span style=" font-family:'verdana,arial,helvetica,sans-serif'; font-size:13px; color:#000000; background-color:#f7f7fa;">Далее в программе загружаем строку подключения</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">public partial class MainWindow : Window</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">        string connectionString;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">        public MainWindow()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">        {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">            InitializeComponent();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">            // Получаем строку подключения из app.config</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">            connectionString = ConfigurationManager.ConnectionStrings[&quot;DefaultConnection&quot;].ConnectionString;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:11pt; color:#6a1009; background-color:#f7f7fa;">    }</span></p></body></html>